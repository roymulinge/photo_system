{% extends "base.html" %}
{% block title %}{{ photo.title }}{% endblock %}

{% block content %}
<div class="max-w-5xl mx-auto py-10 px-4">

  <!-- Back link -->
  <a href="{% url 'home' %}" class="text-zinc-500 hover:text-zinc-900 transition mb-6 inline-block">
    ‚Üê Back to Gallery
  </a>

  <!-- Photo -->
  <div class="relative overflow-hidden rounded-2xl shadow-lg">
    <img src="{{ photo.image.url }}" 
         alt="{{ photo.title }}" 
         class="w-full h-[600px] object-cover transition-transform duration-500 hover:scale-105 rounded-2xl">

    {% if user.is_authenticated %}
      <form method="post" action="{% url 'toggle_like' photo.id %}" 
            class="absolute bottom-4 right-4">
        {% csrf_token %}
        {% if is_liked %}
          <button type="submit" class="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-full shadow transition">
            ‚ù§Ô∏è Unlike
          </button>
        {% else %}
          <button type="submit" class="bg-white/80 hover:bg-white text-black px-4 py-2 rounded-full shadow transition">
            ü§ç Like
          </button>
        {% endif %}
      </form>
    {% endif %}
  </div>

  <!-- Photo info -->
  <div class="mt-6">
    <h1 class="text-3xl font-semibold text-zinc-900 mb-2">{{ photo.title }}</h1>
    {% if photo.description %}
      <p class="text-zinc-700 mb-2">{{ photo.description }}</p>
    {% endif %}
    <p class="text-zinc-500">‚ù§Ô∏è {{ photo.liked_by.count }}</p>

    {% if not user.is_authenticated %}
      <p class="mt-4 text-zinc-500">
        <a href="{% url 'login' %}" class="text-blue-500 hover:underline">Login to like</a>
      </p>
    {% endif %}
  </div>

</div>
{% endblock %}